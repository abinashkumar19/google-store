<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Google Store ‚Äî Computers</title>
<meta name="description" content="Advanced demo e-commerce template: animations, carousel, cart, filters, offline" />
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/vanilla-tilt@1.7.3/dist/vanilla-tilt.min.js" defer></script>
<script src="https://unpkg.com/feather-icons" defer></script>
</head>
<body data-category="computers" data-theme="dark">
<!-- Dynamic Preloader -->
<div id="preloader" class="preloader" role="status" aria-live="polite">
  <div class="loader">
    <svg viewBox="0 0 100 100" class="spin animate__animated animate__pulse animate__infinite"><circle cx="50" cy="50" r="40"></circle></svg>
    <div class="loader-text animate__animated animate__flash animate__infinite">Loading Google Store...</div>
  </div>
</div>

<header class="site-header animate__animated animate__fadeInDown" role="banner">
  <div class="nav-inner container">
    <span class="brand-text">
      <img src="https://latestlogo.com/wp-content/uploads/2024/01/google-store-logo.png" alt="Google Store Logo" style="width:64px; height:64px; object-fit:contain; vertical-align:middle; margin-left:6px;" class="animate__animated animate__zoomIn">
    </span>
    <nav class="main-nav" aria-label="Primary">
      <ul>
        <li><a href="/electronics" class="">Electronics</a></li>
        <li><a href="/phones" class="active">Phones</a></li>
        <li><a href="/computers" class="">Computers</a></li>
        <li><a href="/earphones" class="">Earphones</a></li>
      </ul>
    </nav>
    <div class="nav-actions">
      <div class="search-wrap">
        <input id="search" type="search" placeholder="Search products..." aria-label="Search products" class="animate__animated">
        <button id="clearSearch" class="icon-btn" title="Clear search" aria-hidden="true">‚úï</button>
      </div>
      <button id="viewToggle" class="icon-btn" title="Toggle view" aria-pressed="false">üîÅ</button>
      <button id="themeToggle" class="icon-btn" title="Toggle theme" aria-pressed="false">üåì</button>
      <button id="cartBtn" class="icon-btn cart-btn" aria-label="Open cart">üõí <span id="cartCount" class="cart-count">0</span></button>
    </div>
  </div>
</header>

<div class="parallax">
  <div class="p-layer layer-1"></div>
  <div class="p-layer layer-2"></div>
  <div class="p-layer layer-3"></div>
</div>

<main class="container main" role="main">
  <section class="hero">
    <div class="hero-left reveal animate__animated animate__fadeInLeft">
      <h1 id="page-title">Computers</h1>
      <p class="lead" id="page-sub"></p>
      <div class="hero-cta">
        <button id="browseAll" class="btn primary">Browse all</button>
        <button id="viewDeals" class="btn ghost">Top deals</button>
      </div>
      <div class="meta-row">
        <div class="muted">Free shipping | Secure checkout</div>
      </div>
    </div>
    <div class="hero-right reveal animate__animated animate__fadeInRight">
      <div class="hero-card floating" id="hero-feature">
        <img id="hero-image" src="https://via.placeholder.com/420x280?text=Feature" alt="Featured product" loading="lazy">
        <div class="hero-info">
          <div id="hero-name">Hot pick</div>
          <div id="hero-price">‚Çπ0</div>
        </div>
      </div>
    </div>
  </section>

  <section class="controls reveal animate__animated animate__fadeInUp">
    <div class="controls-left">
      <label>Sort:
        <select id="sort" onchange="this.blur();">
          <option value="featured">Featured</option>
          <option value="price-asc">Price: Low ‚Üí High</option>
          <option value="price-desc">Price: High ‚Üí Low</option>
          <option value="rating">Top rated</option>
        </select>
      </label>
      <label>Category:
        <select id="categoryFilter" onchange="this.blur();">
          <option value="all">All</option>
          <option value="new">New arrivals</option>
        </select>
      </label>
    </div>
    <div class="controls-right">
      <label class="switch">
        <input id="toggleLazy" type="checkbox" checked>
        <span class="slider"></span>
      </label>
      <small class="muted">Lazy images</small>
      <button id="gridBtn" class="btn small">Grid</button>
      <button id="carouselBtn" class="btn small ghost">Carousel</button>
    </div>
  </section>

  <section class="catalog reveal">
    <div id="gridView" class="grid-view" aria-live="polite" tabindex="-1"></div>
    <div id="carouselView" class="carousel-view" aria-hidden="true">
      <div class="swiper mySwiper">
        <div class="swiper-wrapper" id="swiperWrapper"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-pagination"></div>
      </div>
    </div>
  </section>
</main>

<!-- Quickview Modal (Modal for product quickview, removed transparency here) -->
<div id="modal" class="modal-backdrop" aria-hidden="true" role="dialog" aria-modal="true" style="background: #191919;">
  <div class="modal-card animate__animated" role="document">
    <button id="modalClose" class="close" aria-label="Close">‚úï</button>
    <div class="modal-grid">
      <div class="modal-media"><img id="modalImg" src="" alt="" loading="lazy"></div>
      <div class="modal-content">
        <h2 id="modalTitle">Product</h2>
        <p id="modalDesc" class="muted">Description</p>
        <div id="modalPrice" class="price">‚Çπ0</div>
        <div class="modal-actions">
          <button id="modalAdd" class="btn primary">Add to cart</button>
          <button id="modalFav" class="btn ghost">‚ù§ Wishlist</button>
        </div>
      </div>
    </div>
  </div>
</div>

<aside id="cart" class="cart animate__animated" aria-label="Shopping cart" aria-hidden="true" style="background: #000;">
  <div class="cart-header">
    <h3>Cart</h3>
    <button id="cartClose" class="close" aria-label="Close">‚úï</button>
  </div>
  <div id="cartList" class="cart-list" tabindex="0"></div>
  <div class="cart-footer">
    <div class="total-row">
      <div class="muted">Total</div>
      <div id="cartTotal" class="price">‚Çπ0</div>
    </div>
    <div class="cart-actions">
      <button id="checkout" class="btn primary">Checkout</button>
      <button id="emptyCart" class="btn ghost">Empty</button>
    </div>
  </div>
</aside>

<footer class="site-footer animate__animated animate__fadeInUp animate__slow">
  <div class="container">
    <div class="foot-grid">
      <div>
        <strong>Google Store</strong>
        <p class="muted">developed by abinash kumar</p>
      </div>
      <div class="muted">¬© <span id="year"></span></div>
    </div>
  </div>
</footer>

<!-- Payment Modal -->
<div id="paymentModal" class="modal-backdrop" aria-hidden="true" role="dialog" aria-modal="true" style="display:none">
  <div class="modal-card" role="document" style="max-width: 480px;">
    <button id="paymentClose" class="close" aria-label="Close" style="top:10px;right:10px;position:absolute;">‚úï</button>
    <div style="padding: 32px 24px 24px;">
      <h2 style="margin-top:0">Payment</h2>
      <!-- Customer info for UPI, only ask the first time before "I've Paid via UPI" -->
      <div id="customerInfoSection" style="display:none; margin-bottom: 20px;">
        <form id="upiCustomerForm" autocomplete="off" onsubmit="return false;" style="margin-bottom:0;">
          <div style="display:flex; gap:10px; margin-bottom:8px;">
            <label style="flex:1;">
              <span style="display:block;font-size:0.95em;margin-bottom:2px;">Name</span>
              <input id="customerNameInput" type="text" maxlength="50" required placeholder="Enter your name" style="width:100%;padding:6px;" autocomplete="off">
            </label>
          </div>
          <div style="display:flex; gap:10px;">
            <label style="flex:1;">
              <span style="display:block;font-size:0.95em;margin-bottom:2px;">Mobile</span>
              <input id="customerMobileInput" type="tel" maxlength="14" pattern="[0-9]{10,14}" required placeholder="Enter your mobile" style="width:100%;padding:6px;" autocomplete="off">
            </label>
          </div>
        </form>
        <div id="upiUserError" style="color:#e46c6c;font-size:0.96em;margin-top:6px;display:none;text-align:left;"></div>
      </div>
      <p class="muted">Choose your payment method:</p>
      <div style="margin: 24px 0;">
        <button class="btn primary" onclick="showPaymentTab('UPI')">UPI</button>
        <button class="btn ghost" onclick="showPaymentTab('Netbanking')">Net Banking</button>
        <button class="btn ghost" onclick="showPaymentTab('Card')">Credit/Debit Card</button>
      </div>
      <!-- Show Total Amount in Payment Modal -->
      <div id="totalAmountWrapper" style="margin-bottom: 24px; text-align:center;">
        <span style="font-size:1.1em;color:#fff;">Total Amount to Pay:&nbsp;</span>
        <span id="totalPaymentAmount" style="font-weight:bold;font-size:1.25em;color:#4dd784;">‚Çπ0</span>
      </div>
      <div id="paymentUPI" style="display:none;">
        <div style="margin-bottom:1em;">Pay to UPI ID: <strong>6303965190@kotak811</strong></div>
        <img src="https://i.ibb.co/84GXkSMt/pay.jpg" alt="UPI QR" style="display:block;margin:0 auto 1em auto;width:150px;height:150px;object-fit:contain;background:#fff;border-radius:8px;">
        <input id="upiInput" type="text" value="6303965190@kotak811" readonly style="width:100%;padding:6px;margin-bottom:1em;text-align:center;" onclick="this.select()">
        <div style="font-size:0.95em;color:#aaa; text-align:center;">Scan QR with any UPI app or copy/paste UPI ID</div>
        <button class="btn small" style="margin-top:1em" onclick="copyUPIID()">Copy UPI ID</button>
      </div>
      <div id="paymentNetbanking" style="display:none;">
        <form id="netbankingForm" onsubmit="event.preventDefault(); handlePaymentDone('Netbanking');">
          <label style="display:block; margin-bottom:8px;">Bank
            <select required style="width:100%;padding:6px;">
              <option value="">Choose bank</option>
              <option>SBI</option>
              <option>HDFC Bank</option>
              <option>Kotak Mahindra</option>
              <option>ICICI Bank</option>
              <option>Axis Bank</option>
              <option>Other...</option>
            </select>
          </label>
          <label style="display:block; margin-bottom:8px;">User ID
            <input type="text" required style="width:100%;padding:6px;" />
          </label>
          <label style="display:block; margin-bottom:16px;">Password
            <input type="password" required style="width:100%;padding:6px;" autocomplete="off"/>
          </label>
          <button class="btn primary" type="submit" style="width:100%;">Pay Now</button>
        </form>
      </div>
      <div id="paymentCard" style="display:none;">
        <form id="cardPaymentForm" onsubmit="event.preventDefault(); handlePaymentDone('Card');">
          <label style="display:block; margin-bottom:8px;">Card Number
            <input type="text" maxlength="19" pattern="\d*" inputmode="numeric" placeholder="XXXX XXXX XXXX XXXX" required style="width:100%;padding:6px;" />
          </label>
          <div style="display:flex;gap:8px;margin-bottom:8px;">
            <label style="flex:1;">Expiry
              <input type="text" maxlength="5" pattern="\d{2}/\d{2}" placeholder="MM/YY" required style="width:100%;padding:6px;" />
            </label>
            <label style="flex:1;">CVV
              <input type="password" maxlength="4" pattern="\d{3,4}" placeholder="CVV" required style="width:100%;padding:6px;" />
            </label>
          </div>
          <label style="display:block; margin-bottom:16px;">Name on card
            <input type="text" required style="width:100%;padding:6px;" />
          </label>
          <button class="btn primary" type="submit" style="width:100%;">Pay Now</button>
        </form>
      </div>
      <!-- Receipt Modal (hidden initially) -->
      <div id="receiptModal" style="display:none; background: #1e1e1e; border-radius: 8px; box-shadow:0 0 8px #0007; padding:28px 24px 24px 24px; text-align:center; margin-top:16px;">
        <h3 style="color:#4dd784; margin-bottom:0.5em;">Payment Successful!</h3>
        <div class="muted" style="margin-bottom:1em;">Thank you for your purchase.<br>Your payment has been received. <br>You can now view or download your receipt.</div>
        <button class="btn primary" onclick="viewReceipt()">View Receipt</button>
        <button class="btn ghost" style="margin-left:12px" onclick="downloadReceipt()">Download Receipt</button>
      </div>
      <!-- End receipt modal section -->
    </div>
  </div>
</div>
<style>
#paymentModal[aria-hidden="false"] { display: flex !important; align-items: center; justify-content: center; }
#paymentModal .modal-card { background: #161616; border-radius: 10px; box-shadow: 0 4px 32px #0008; }
</style>

<script src="script.js" defer></script>
<script>
// ========== Animations and Dynamic Interactions ===========

// Enhanced Preloader Animation
window.addEventListener('load', function() {
  setTimeout(() => {
    const preloader = document.getElementById('preloader');
    if (preloader) {
      gsap.to(preloader, { opacity: 0, duration: 0.7, pointerEvents: "none", onComplete: () => preloader.style.display = "none" });
    }
  }, 950);
});

// Animate nav and hero on scroll
gsap.registerPlugin(ScrollTrigger);
gsap.from('.site-header', {
  y: -80, opacity: 0, duration: 1,
  ease: "power2.out",
  scrollTrigger: { trigger: '.site-header', start: 'top top', toggleActions: 'play none none reverse' }
});

// Parallax Effect for .parallax + Particle effect for more dynamism
document.addEventListener("mousemove", (e) => {
  const layers = document.querySelectorAll('.p-layer');
  layers.forEach((layer, i) => {
    const depth = (i + 1) / 10;
    gsap.to(layer, { x: (e.clientX - window.innerWidth / 2) * depth, y: (e.clientY - window.innerHeight / 2) * depth, overwrite: true, duration: 0.35 });
  });
});

// Floating sparkles/particles in hero area for dynamic feeling
function createParticle() {
  const particle = document.createElement('span');
  particle.className = 'particle';
  particle.style.top = Math.random() * 80 + 10 + '%';
  particle.style.left = Math.random() * 80 + 10 + '%';
  particle.style.opacity = (Math.random() * 0.4 + 0.35).toFixed(2);
  particle.style.transform = `scale(${Math.random() * 0.9 + 0.55})`;
  particle.style.animationDuration = `${1 + Math.random() * 3.5}s`;
  document.body.appendChild(particle);
  setTimeout(() => particle.remove(), 4000);
}
setInterval(createParticle, 500);
const style = document.createElement('style');
style.textContent = `.particle{position:fixed;width:8px;height:8px;border-radius:50%;background:linear-gradient(45deg,#4dd784,#43a4ee,#ffd66a);z-index:9999;pointer-events:none;animation:particle-move 4s linear;box-shadow:0 0 10px #43a4ee38;}
@keyframes particle-move{to{transform:translateY(-80px) scale(0.8);opacity:0.2;}}`
document.head.appendChild(style);

// Animate hero section and CTA
gsap.from('.hero-left', { x: -90, opacity: 0, duration: 1.3, ease: "back.out(1.4)" });
gsap.from('.hero-right', { y: 60, opacity: 0, duration: 1.25, delay: 0.25, ease: "back.out(1.7)" });
gsap.from('.hero-cta .btn', {
  scale: 0.7, opacity: 0,
  stagger: 0.16,
  duration: 0.53,
  delay: 0.75,
  ease: "back"
});

// Feature card dynamic 3D hover, slight floating effect
document.addEventListener('DOMContentLoaded', function() {
  const heroCard = document.getElementById('hero-feature');
  if (heroCard) {
    VanillaTilt.init(heroCard, { max: 20, speed: 500, scale: 1.06, glare: true, "max-glare": 0.22 });
    heroCard.addEventListener('mouseenter', () => {
      gsap.to(heroCard, { boxShadow: "0 16px 64px #43a4ee55,0 2px 16px #4dd78466", scale: 1.04, y: -6, duration: 0.29 })
    });
    heroCard.addEventListener('mouseleave', () => {
      gsap.to(heroCard, { boxShadow: "0 2px 10px #000a", scale: 1, y: 0, duration: 0.26 })
    });
    // Breathing animation on regular interval for hero card
    setInterval(() => {
      gsap.to(heroCard, { scale: 1.024, y: -2, duration: 0.9, yoyo: true, repeat: 1, ease: "sine.inOut" });
    }, 3700);
  }
  // Animate .reveal elements as they scroll in
  document.querySelectorAll('.reveal').forEach((el, idx) => {
    gsap.fromTo(el, {opacity:0,y:65,scale:0.98}, {
      opacity:1,
      y:0,
      scale:1,
      duration:1.09,
      delay:idx * 0.08,
      ease: "power3.out",
      scrollTrigger: { trigger:el, start:"top 88%", toggleActions:"play none none none" }
    });
  });
  // Button hover effects
  document.querySelectorAll(".btn").forEach(btn => {
    btn.addEventListener("mouseenter", () => gsap.to(btn, { scale: 1.07, boxShadow: "0 4px 18px #4dd78435", duration: .16 }));
    btn.addEventListener("mouseleave", () => gsap.to(btn, { scale: 1, boxShadow:'', duration: .13 }));
    btn.addEventListener("mousedown", ()=>gsap.to(btn,{scale:0.93,duration:.08}));
    btn.addEventListener("mouseup",()=>gsap.to(btn,{scale:1.07,duration:.08}));
  });
  // Animate search input expansion
  const search = document.getElementById('search');
  if(search){
    search.addEventListener("focus",()=>gsap.to(search,{scale:1.06,boxShadow:"0 2px 12px #39e78b18",duration:.18}));
    search.addEventListener("blur",()=>gsap.to(search,{scale:1,boxShadow:"",duration:.17}));
  }
});

// Dynamic carousel & grid switching with dynamic entry
document.addEventListener("DOMContentLoaded", function() {
  let gridView = document.getElementById('gridView');
  let carouselView = document.getElementById('carouselView');
  let gridBtn = document.getElementById('gridBtn');
  let carouselBtn = document.getElementById('carouselBtn');
  let swiperInstance = null;

  function showGrid() {
    gsap.to(carouselView, {opacity:0,y:24,duration:.23, onComplete:()=>{
      gridView.style.display = "";
      carouselView.style.display = "none";
      gridBtn.classList.remove("ghost");
      carouselBtn.classList.add("ghost");
      gsap.fromTo(gridView, { opacity: 0, y: 24 }, { opacity: 1, y: 0, duration: .52, ease: "power2.out" });
    }});
  }
  function showCarousel() {
    gsap.to(gridView, {opacity:0,y:24,duration:.21, onComplete:()=>{
      gridView.style.display = "none";
      carouselView.style.display = "";
      gridBtn.classList.add("ghost");
      carouselBtn.classList.remove("ghost");
      gsap.fromTo(carouselView, { opacity: 0, y: 21 }, { opacity: 1, y: 0, duration: .52, ease: "power2.out" });
      // Swiper activation
      if (!swiperInstance) {
        swiperInstance = new Swiper(".mySwiper", {
          slidesPerView: 1.15,
          spaceBetween: 16,
          navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev"
          },
          pagination: {
            el: ".swiper-pagination",
            clickable: true
          },
          speed: 650,
          autoplay: { delay: 4200, disableOnInteraction:false },
          loop: true,
          breakpoints: {
            576: { slidesPerView: 2, }, 900: { slidesPerView: 3 }
          },
          effect: "coverflow",
          coverflowEffect: {
            rotate: 26,
            stretch: 0,
            depth: 120,
            modifier: 1,
            slideShadows: true
          }
        });
      } else {
        swiperInstance.update();
      }
    }});
  }
  gridBtn && gridBtn.addEventListener("click", showGrid);
  carouselBtn && carouselBtn.addEventListener("click", showCarousel);

  // Default show grid
  showGrid();
});

// Animate modal open/close with pop/fade
function animateModal(open) {
  var modal = document.getElementById('modal');
  var card = modal.querySelector('.modal-card');
  if(open) {
    modal.style.display = 'flex';
    modal.setAttribute('aria-hidden', 'false');
    card.classList.remove('animate__fadeOutUp');
    card.classList.add('animate__fadeInDown');
    gsap.fromTo(card, {scale:0.85, opacity:0},{scale:1, opacity:1, duration:.36, ease:"power2.out"});
  } else {
    card.classList.remove('animate__fadeInDown');
    card.classList.add('animate__fadeOutUp');
    gsap.to(card, {scale:.89, opacity:0, duration:.23, onComplete:()=>{ 
      modal.style.display = 'none';
      modal.setAttribute('aria-hidden', 'true');
      card.classList.remove('animate__fadeOutUp');
    } });
  }
}
document.addEventListener('DOMContentLoaded',()=>{
  let modal = document.getElementById('modal');
  let closeBtn = document.getElementById('modalClose');
  if(modal && closeBtn) {
    closeBtn.onclick = ()=>animateModal(false);
    window.openProductModal = ()=>animateModal(true);
  }
  modal.addEventListener('mousedown',function(e){
    if(e.target==modal) animateModal(false);
  });
});

// Dynamic Year Animation
document.addEventListener("DOMContentLoaded",function(){
  let y=document.getElementById("year");
  if(y){
    let thisYear = new Date().getFullYear();
    let anim = {val: thisYear-2};
    gsap.to(anim, {val:thisYear, duration:.8, ease:"power2.out", onUpdate:()=>y.textContent=Math.round(anim.val)});
  }
});

// Animate cart open/close pop/draw
document.addEventListener('DOMContentLoaded', function() {
  const cart = document.getElementById('cart');
  const cartBtn = document.getElementById('cartBtn');
  const cartClose = document.getElementById('cartClose');
  if (cart && cartBtn && cartClose) {
    cartBtn.addEventListener('click', function () {
      cart.setAttribute('aria-hidden', 'false');
      cart.classList.remove('animate__fadeOutRight');
      cart.classList.add('animate__fadeInRightBig');
      gsap.fromTo(cart, {x:340,opacity:0},{x:0,opacity:1,duration:.32,ease:'power2.out',clearProps:"x,opacity"});
      cart.style.display = '';
    });
    cartClose.addEventListener('click', function () {
      cart.classList.remove('animate__fadeInRightBig');
      cart.classList.add('animate__fadeOutRight');
      gsap.to(cart, {x:350,opacity:0,duration:.19,onComplete:()=>{cart.style.display='';cart.setAttribute('aria-hidden','true');cart.classList.remove('animate__fadeOutRight')}} );
    });
  }
});

// Animate payment modal open/close with fade and pop
(function(){
  const paymentModal = document.getElementById('paymentModal');
  const paymentClose = document.getElementById('paymentClose');
  if(paymentModal && paymentClose){
    paymentClose.onclick = function(){
      gsap.to(paymentModal.querySelector('.modal-card'), {scale:0.9, opacity:0, duration:0.22, onComplete:()=>{paymentModal.setAttribute('aria-hidden','true');paymentModal.style.display='none';}})
    }
    window.openPaymentModal = ()=>{
      paymentModal.style.display = "flex";
      paymentModal.setAttribute('aria-hidden','false');
      gsap.fromTo(paymentModal.querySelector('.modal-card'), {scale:0.88, opacity:0},{scale:1, opacity:1, duration:.43, ease:"back"});
    }
  }
})();


// ========== Existing Application Logic (Unchanged) ===========
</script>
<script src="script.js" defer></script>
</body>
</html>
